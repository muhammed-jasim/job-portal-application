{% extends 'user/base.html' %}
{% load static %}
{% block main %}
<link rel="shortcut icon" type="image/x-icon" href="{% static 'assets/img/favicon.ico' %}">

<!-- CSS here -->
<link rel="stylesheet" href="{% static  'assets/css/bootstrap.min.css' %}">
<link rel="stylesheet" href="{% static 'assets/css/owl.carousel.min.css' %}">
<link rel="stylesheet" href="{% static 'assets/css/price_rangs.css' %}">
<link rel="stylesheet" href="{% static 'assets/css/flaticon.css' %}">
<link rel="stylesheet" href="{% static 'assets/css/slicknav.css' %}">
<link rel="stylesheet" href="{% static 'assets/css/animate.min.css' %}">
<link rel="stylesheet" href="{% static 'assets/css/magnific-popup.css' %}">
<link rel="stylesheet" href="{% static 'assets/css/fontawesome-all.min.css' %}">
<link rel="stylesheet" href="{% static 'assets/css/themify-icons.css' %}">
<link rel="stylesheet" href="{% static 'assets/css/slick.css' %}">
<link rel="stylesheet" href="{% static 'assets/css/nice-select.css' %}">
<link rel="stylesheet" href="{% static 'assets/css/style.css' %}">
    <main>

        <!-- Hero Area Start-->
        <div class="slider-area ">
            <div class="single-slider section-overly slider-height2 d-flex align-items-center" data-background="{% static 'assets/img/hero/about.jpg' %}">
                <div class="container">
                    <div class="row">
                        <div class="col-xl-12">
                            <div class="hero-cap text-center">
                                <h2>Get your job</h2>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Hero Area End -->
        <!-- Job List Area Start -->
        <div class="job-listing-area pt-120 pb-120">
            <div class="container">
                <div class="row">
                    <!-- Left content -->
                    <div class="col-xl-3 col-lg-3 col-md-4">
                        <div class="row">
                            <div class="col-12">
                                    <div class="small-section-tittle2 mb-45">
                                    <div class="ion"> <svg 
                                        xmlns="http://www.w3.org/2000/svg"
                                        xmlns:xlink="http://www.w3.org/1999/xlink"
                                        width="20px" height="12px">
                                    <path fill-rule="evenodd"  fill="rgb(27, 207, 107)"
                                        d="M7.778,12.000 L12.222,12.000 L12.222,10.000 L7.778,10.000 L7.778,12.000 ZM-0.000,-0.000 L-0.000,2.000 L20.000,2.000 L20.000,-0.000 L-0.000,-0.000 ZM3.333,7.000 L16.667,7.000 L16.667,5.000 L3.333,5.000 L3.333,7.000 Z"/>
                                    </svg>
                                    </div>
                                    <h4>Filter Jobs</h4>
                                </div>
                            </div>
                        </div>
                        <!-- Job Category Listing start -->
                        <div class="job-category-listing mb-50">
                            <!-- single one -->
                            <div class="single-listing">
                               <div class="small-section-tittle2">
                                     <h4>Select Category</h4>
                               </div>
                                <!-- Select job items start -->
                                <div class="select-job-items2">
                                    <select id="myDropdown" onchange="filterJobs()">
                                        <!-- <option value="" selected disabled>Select a category</option> -->
                                        {% for value, display in categories %}
                                            <option value="{{ value }}" {% if value == selected_jobValue %}selected{% endif %}>{{ display }}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                                <!--  Select job items End-->
                                <!-- select-Categories start -->
                                <div class="select-Categories pt-80 pb-50">
                                    <div class="small-section-tittle2">
                                        <h4>Job Type</h4>
                                    </div>
                                    <select id="jobTypeDropdown" onchange="filterJobs()">
                                        <!-- <option value="">All Job Types</option> -->
                                        {% for value, display in job_types %}
                                            <option value="{{ value }}" {% if value == selected_jobtype %}selected{% endif %}>{{ display }}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                                <!-- select-Categories End -->
                            </div>
                            <!-- single two -->
                            <div class="single-listing">
                               <div class="small-section-tittle2">
                                     <h4>Job Location</h4>
                               </div>
                                <!-- Select job items start -->
                                <div class="select-job-items2" >
                                    <select name="select" id="jobLocationDropdown" onchange="filterJobs()">
                                        {% for value, display in job_location %}
                                            <option value="{{ value }}" {% if value == selected_location %}selected{% endif %}>{{ display }}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                                <!--  Select job items End-->
                                <!-- select-Categories start -->
                                <div class="select-Categories pt-80 pb-50">
                                    <div class="small-section-tittle2">
                                        <h4>Experience</h4>
                                    </div>
                                    <label class="container">1-2 Years
                                        <input type="checkbox" name="experience" id="experience1" value="1-2" onchange="filterJobs()" >
                                        <span class="checkmark"></span>
                                    </label>
                                    <label class="container">2-3 Years
                                        <input type="checkbox" name="experience" id="experience2" value="2-3" onchange="filterJobs()">
                                        <span class="checkmark"></span>
                                    </label>
                                    <label class="container">3-6 Years
                                        <input type="checkbox" name="experience" id="experience3" value="3-6" onchange="filterJobs()">
                                        <span class="checkmark"></span>
                                    </label>
                                    <label class="container">6 or more Years
                                        <input type="checkbox" name="experience" id="experience4" value="6" onchange="filterJobs()">
                                        <span class="checkmark"></span>
                                    </label>
                                </div>
                                
                                <!-- select-Categories End -->
                            </div>
                            <!-- single three -->
                            <!-- <div class="single-listing">
                                <div class="select-Categories pb-50">
                                    <div class="small-section-tittle2">
                                        <h4>Posted Within</h4>
                                    </div>
                                    <label class="container">Any
                                        <input type="checkbox" >
                                        <span class="checkmark"></span>
                                    </label>
                                    <label class="container">Today
                                        <input type="checkbox" checked="checked active">
                                        <span class="checkmark"></span>
                                    </label>
                                    <label class="container">Last 2 days
                                        <input type="checkbox">
                                        <span class="checkmark"></span>
                                    </label>
                                    <label class="container">Last 3 days
                                        <input type="checkbox">
                                        <span class="checkmark"></span>
                                    </label>
                                    <label class="container">Last 5 days
                                        <input type="checkbox">
                                        <span class="checkmark"></span>
                                    </label>
                                    <label class="container">Last 10 days
                                        <input type="checkbox">
                                        <span class="checkmark"></span>
                                    </label>
                                </div>
                            </div> -->
                            <div class="single-listing">
                                <!-- Range Slider Start -->
                                <!-- <aside class="left_widgets p_filter_widgets price_rangs_aside sidebar_box_shadow">
                                    <div class="small-section-tittle2">
                                        <h4>Filter Jobs</h4>
                                    </div>
                                    <div class="widgets_inner">
                                        <div class="range_item">
                                            <input type="text" class="js-range-slider" value="" />
                                            <div class="d-flex align-items-center">
                                                <div class="price_text">
                                                    <p>Price :</p>
                                                </div>
                                                <div class="price_value d-flex justify-content-center">
                                                    <input type="text" class="js-input-from" id="amount" readonly />
                                                    <span>to</span>
                                                    <input type="text" class="js-input-to" id="amount" readonly />
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </aside> -->
                              <!-- Range Slider End -->
                            </div>
                            <div class="single-listing">
                                {% comment %} <button>filter</button>                            {% endcomment %}
                            </div>
                        </div>
                        <!-- Job Category Listing End -->
                    </div>
                    <!-- Right content -->
                    <div class="col-xl-9 col-lg-9 col-md-8">
                        <!-- Featured_job_start -->
                        <section class="featured-job-area">
                            <div class="container">
                                <!-- Count of Job list Start -->
                                <div class="row">
                                    <div class="col-lg-12">
                                        <div class="count-job mb-35">
                                            <span>{{ count }} Jobs found</span>
                                            <!-- Select job items start -->
                                            <!-- <div class="select-job-items">
                                                <span>Sort by</span>
                                                <select name="select">
                                                    <option value="">None</option>
                                                    <option value="">job list</option>
                                                    <option value="">job list</option>
                                                    <option value="">job list</option>
                                                </select>
                                            </div> -->
                                            <!--  Select job items End-->
                                        </div>
                                    </div>
                                </div>
                                <!-- Count of Job list End -->
                                <!-- single-job-content -->

                                {% comment %} JOB ITEM BEGGINING  {% endcomment %}
                                <div class="job-listings">
                                    {% for job in jobs %}
                                        <div class="single-job-items mb-30">
                                            <div class="job-items">
                                                <div class="company-img">
                                                    <a href="#"><img style='width:60px;' src="{% static 'img/job-icon.png' %}" alt=""></a>
                                                </div>
                                                <div class="job-tittle job-tittle2">
                                                    <a href="#">
                                                        <h4>{{ job.title }}</h4>
                                                    </a>
                                                    <ul>
                                                        <li>Parker jobs</li>
                                                        <li><i class="fas fa-map-marker-alt"></i>{{ job.location }}</li>
                                                        <li>{{ job.min_salary }} - {{ job.max_salary }}</li>
                                                    </ul>
                                                </div>
                                            </div>
                                            <div class="items-link items-link2 f-right">
                                                <a href="{% url 'job-details' job.id %}">View</a>
                                                <span>Posted on: {{ job.updated_at }}</span>
                                            </div>
                                        </div>
                                    {% endfor %}
                                </div>
                                {% comment %} JOB ITEM ENDING  {% endcomment %}
                            </div>
                        </section>
                        <!-- Featured_job_end -->
                    </div>
                </div>
            </div>
        </div>
        <!-- Job List Area End -->
        <!--Pagination Start  -->
       
        <!--Pagination End  -->
        
    </main>
    
    <script>
        function filterJobs() {
            const dropdown = document.getElementById("myDropdown");
            const jobTypeDropdown = document.getElementById("jobTypeDropdown"); 
            const jobLocationDropdown = document.getElementById("jobLocationDropdown"); 

            const selectedJobType = jobTypeDropdown ? jobTypeDropdown.value : null;
            const selectedValue = dropdown ? dropdown.value : null;
            const selectedLocation = jobLocationDropdown ? jobLocationDropdown.value : null;


            const experienceRadio = document.querySelector('input[name="experience"]:checked');
            const experienceValue = experienceRadio ? experienceRadio.value : null;
            console.log(`Selected experience level: ${experienceValue}`);

            const url = new URL(window.location.href);
            if (selectedValue) {
                url.searchParams.set('category', selectedValue);
            } else {
                url.searchParams.delete('category');
            }
            if (selectedJobType) {
                url.searchParams.set('job_type', selectedJobType);
            } else {
                url.searchParams.delete('job_type');
            }
            if (experienceValue) {
                url.searchParams.set('exp', experienceValue);
            } else {
                url.searchParams.delete('exp');
            }
            if (selectedLocation) {
                url.searchParams.set('location', selectedLocation);
            } else {
                url.searchParams.delete('location');
            }
            window.location.href = url.toString();
        }

        document.addEventListener('DOMContentLoaded', () => {
            const urlParams = new URLSearchParams(window.location.search);
            const experience = urlParams.get('exp');
            if (experience) {
                const radioButton = document.querySelector(`input[name="experience"][value="${experience}"]`);
                if (radioButton) {
                    radioButton.checked = true;
                }
            }

            const selectedCategory = urlParams.get('category');
            if (selectedCategory) {
                const categoryDropdown = document.getElementById('myDropdown');
                if (categoryDropdown) {
                    categoryDropdown.value = selectedCategory;
                }
            }

            const selectedJobType = urlParams.get('job_type');
            if (selectedJobType) {
                const jobTypeDropdown = document.getElementById('jobTypeDropdown');
                if (jobTypeDropdown) {
                    jobTypeDropdown.value = selectedJobType;
                }
            }

            const selectedLocation = urlParams.get('location');
            if (selectedLocation) {
                const jobLocationDropdown = document.getElementById('jobLocationDropdown');
                if (jobLocationDropdown) {
                    jobLocationDropdown.value = jobLocationDropdown;
                }
            }
        });

    </script>
    <!-- All JS Custom Plugins Link Here -->
<script src="{% static 'assets/js/vendor/modernizr-3.5.0.min.js' %}"></script>
<!-- Jquery, Popper, Bootstrap -->
<script src="{% static 'assets/js/vendor/jquery-1.12.4.min.js' %}"></script>
<script src="{% static 'assets/js/popper.min.js' %}"></script>
<script src="{% static 'assets/js/bootstrap.min.js' %}"></script>
<!-- Jquery Mobile Menu -->
<script src="{% static 'assets/js/jquery.slicknav.min.js' %}"></script>

<!-- Jquery Slick, Owl-Carousel Range -->
<script src="{% static 'assets/js/owl.carousel.min.js' %}"></script>
{% comment %} <script src="{% static 'assets/js/slick.min.js' %}"></script> {% endcomment %}
<script src="{% static 'assets/js/price_rangs.js' %}"></script>
<!-- One Page, Animated-HeadLin -->
<script src="{% static 'assets/js/wow.min.js' %}"></script>
<script src="{% static 'assets/js/animated.headline.js' %}"></script>
<script src="{% static 'assets/js/jquery.magnific-popup.js' %}"></script>

<!-- Scrollup, nice-select, sticky -->
<script src="{% static 'assets/js/jquery.scrollUp.min.js' %}"></script>
<script src="{% static 'assets/js/jquery.nice-select.min.js' %}"></script>
<script src="{% static 'assets/js/jquery.sticky.js' %}"></script>

<!-- contact js -->
<script src="{% static 'assets/js/contact.js' %}"></script>
<script src="{% static 'assets/js/jquery.form.js' %}"></script>
<script src="{% static 'assets/js/jquery.validate.min.js' %}"></script>
<script src="{% static 'assets/js/mail-script.js' %}"></script>
<script src="{% static 'assets/js/jquery.ajaxchimp.min.js' %}"></script>

<!-- Jquery Plugins, main Jquery -->
<script src="{% static 'assets/js/plugins.js' %}"></script>
<script src="{% static 'assets/js/main.js' %}"></script>
{% endblock %}